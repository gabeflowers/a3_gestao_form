<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestor de Atendimentos</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            display: flex;
        }
        #sidebar {
            min-width: 250px;
            max-width: 250px;
            min-height: 100vh;
        }
        #content {
            width: 100%;
            padding: 20px;
        }
    </style>
</head>
<body>
    <div id="sidebar" class="bg-light border-right">
        <div class="sidebar-heading">Gestor de Atendimentos</div>
        <div class="list-group list-group-flush">
            <a href="#login" class="list-group-item list-group-item-action bg-light">Login</a>
            <a href="#registro" class="list-group-item list-group-item-action bg-light">Registro de Atendimento</a>
            <a href="#cadastro" class="list-group-item list-group-item-action bg-light">Cadastro de Atendimento</a>
            <a href="#visualizar" class="list-group-item list-group-item-action bg-light">Visualizar Atendimentos</a>
        </div>
    </div>
    <div id="content">
        <div id="login">
            <h2 class="mt-4">Login</h2>
            <form>
                <div class="form-group">
                    <label for="email">Email:</label>
                    <input type="email" class="form-control" id="email" placeholder="Enter email">
                </div>
                <div class="form-group">
                    <label for="password">Password:</label>
                    <input type="password" class="form-control" id="password" placeholder="Enter password">
                </div>
                <button type="submit" class="btn btn-primary btn-block">Login</button>
            </form>
        </div>
        <div id="registro" style="display: none;">
            <h2 class="mt-4">Registro de Atendimento</h2>
            <form id="registroForm">
                <div class="form-group">
                    <label for="attendantId">Identificação do atendente:</label>
                    <input type="text" class="form-control" id="attendantId" placeholder="Insira sua resposta">
                </div>
                <div class="form-group">
                    <label for="attendanceType">Tipo de atendimento:</label>
                    <select class="form-control" id="attendanceType">
                        <option>Presencial</option>
                        <option>WhatsApp</option>
                        <option>Ligação telefônica</option>
                        <option>Email</option>
                        <option>Redes sociais</option>
                        <option>Teams</option>
                        <option>Outra</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="attendedPerson">Quem estou atendendo:</label>
                    <select class="form-control" id="attendedPerson">
                        <option>Empregador</option>
                        <option>Trabalhador</option>
                        <option>Outras agências</option>
                        <option>ADS</option>
                        <option>Setores da FGTAS</option>
                        <option>Interessado em informações sobre o Mercado de Trabalho</option>
                        <option>Outra</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="employerName">Nome do empregador:</label>
                    <input type="text" class="form-control" id="employerName" placeholder="Nome do empregador">
                </div>
                <div class="form-group">
                    <label for="employerCNPJ">CNPJ do empregador:</label>
                    <input type="text" class="form-control" id="employerCNPJ" placeholder="CNPJ do empregador">
                </div>
                <div class="form-group">
                    <label for="employerPhone">Telefone de contato do empregador:</label>
                    <input type="text" class="form-control" id="employerPhone" placeholder="Telefone de contato do empregador">
                </div>
                <div class="form-group">
                    <label for="attendanceCategory">Tipo de atendimento:</label>
                    <select class="form-control" id="attendanceCategory">
                        <option>Carteira de Trabalho, SD, Vagas</option>
                        <option>Programa Gaúcho do Artesanato</option>
                        <option>Vida Centro Humanístico</option>
                        <option>Orientações sobre empreendedorismo</option>
                        <option>Orientações sobre cursos de qualificação</option>
                        <option>Informações sobre mercado de trabalho</option>
                        <option>Outra</option>
                    </select>
                </div>
                <button type="submit" class="btn btn-primary btn-block">Registrar Atendimento</button>
            </form>
        </div>
        <div id="cadastro" style="display: none;">
            <h2 class="mt-4">Cadastro de Atendimento</h2>
            <form id="cadastroForm">
                <div class="form-group">
                    <label for="attendanceForm">Forma de atendimento:</label>
                    <select class="form-control" id="attendanceForm">
                        <option>Presencial</option>
                        <option>WhatsApp</option>
                        <option>Ligação telefônica</option>
                        <option>Email</option>
                        <option>Redes sociais</option>
                        <option>Teams</option>
                        <option>Outra</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="publicType">Público:</label>
                    <select class="form-control" id="publicType">
                        <option>Empregador</option>
                        <option>Trabalhador</option>
                        <option>Outras agências</option>
                        <option>ADS</option>
                        <option>Setores da FGTAS</option>
                        <option>Interessado em informações sobre o Mercado de Trabalho</option>
                        <option>Outra</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="attendanceType">Tipo de atendimento:</label>
                    <select class="form-control" id="attendanceType">
                        <option>Carteira de Trabalho, SD, Vagas</option>
                        <option>Programa Gaúcho do Artesanato</option>
                        <option>Vida Centro Humanístico</option>
                        <option>Orientações sobre empreendedorismo</option>
                        <option>Orientações sobre cursos de qualificação</option>
                        <option>Informações sobre mercado de trabalho</option>
                        <option>Outra</option>
                    </select>
                </div>
                <button type="submit" class="btn btn-primary btn-block">Cadastrar Atendimento</button>
            </form>
        </div>
        <div id="visualizar" style="display: none;">
            <h2 class="mt-4">Visualizar Atendimentos</h2>
            <div id="atendimentosTable"></div>
        </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script>
        document.querySelectorAll('.list-group-item').forEach(item => {
            item.addEventListener('click', function(e) {
                e.preventDefault();
                document.querySelectorAll('#content > div').forEach(section => {
                    section.style.display = 'none';
                });
                const target = document.querySelector(this.getAttribute('href'));
                target.style.display = 'block';
            });
        });

        function saveToLocalStorage(key, data) {
            localStorage.setItem(key, JSON.stringify(data));
        }

        function getFromLocalStorage(key) {
            return JSON.parse(localStorage.getItem(key)) || [];
        }

        function createRow(attendance) {
            return `
                <tr>
                    <td>${attendance.attendantId}</td>
                    <td>${attendance.attendanceType}</td>
                    <td>${attendance.attendedPerson}</td>
                    <td>${attendance.employerName}</td>
                    <td>${attendance.employerCNPJ}</td>
                    <td>${attendance.employerPhone}</td>
                    <td>${attendance.attendanceCategory}</td>
                    <td><button class="btn btn-danger btn-sm delete-btn" data-id="${attendance.id}">Delete</button></td>
                </tr>
            `;
        }

        function renderTable() {
            const atendimentos = getFromLocalStorage('atendimentos');
            const rows = atendimentos.map(createRow).join('');
            document.getElementById('atendimentosTable').innerHTML = `
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>Atendente</th>
                            <th>Tipo</th>
                            <th>Quem</th>
                            <th>Nome Empregador</th>
                            <th>CNPJ Empregador</th>
                            <th>Telefone Empregador</th>
                            <th>Categoria</th>
                            <th>Ações</th>
                        </tr>
                    </thead>
                    <tbody>${rows}</tbody>
                </table>
            `;

            document.querySelectorAll('.delete-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const id = this.getAttribute('data-id');
                    const atendimentos = getFromLocalStorage('atendimentos');
                    const updatedAtendimentos = atendimentos.filter(att => att.id !== id);
                    saveToLocalStorage('atendimentos', updatedAtendimentos);
                    renderTable();
                });
            });
        }

        document.getElementById('registroForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const atendimentos = getFromLocalStorage('atendimentos');
            const id = Date.now().toString();
            const newAttendance = {
                id,
                attendantId: document.getElementById('attendantId').value,
                attendanceType: document.getElementById('attendanceType').value,
                attendedPerson: document.getElementById('attendedPerson').value,
                employerName: document.getElementById('employerName').value,
                employerCNPJ: document.getElementById('employerCNPJ').value,
                employerPhone: document.getElementById('employerPhone').value,
                attendanceCategory: document.getElementById('attendanceCategory').value,
            };
            atendimentos.push(newAttendance);
            saveToLocalStorage('atendimentos', atendimentos);
            this.reset();
        });

        document.getElementById('cadastroForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const atendimentos = getFromLocalStorage('atendimentos');
            const id = Date.now().toString();
            const newAttendance = {
                id,
                attendanceForm: document.getElementById('attendanceForm').value,
                publicType: document.getElementById('publicType').value,
                attendanceType: document.getElementById('attendanceType').value,
            };
            atendimentos.push(newAttendance);
            saveToLocalStorage('atendimentos', atendimentos);
            renderTable();
            this.reset();
        });

        window.addEventListener('load', renderTable);
    </script>
</body>
</html>
